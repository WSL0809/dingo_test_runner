# æ ‡ç­¾åŠŸèƒ½æµ‹è¯•å¥—ä»¶

æœ¬ç›®å½•åŒ…å«äº† dingo_test_runner æ ‡ç­¾åŠŸèƒ½çš„å…¨é¢æµ‹è¯•å¥—ä»¶ï¼Œæ¶µç›–äº†æ‰€æœ‰å·²å®ç°çš„æ ‡ç­¾å‘½ä»¤å’Œè¾¹ç•Œæƒ…å†µã€‚

## ğŸ“‹ æµ‹è¯•æ–‡ä»¶æ¦‚è§ˆ

### 1. `tags_test.test`
**åŸå§‹æ ‡ç­¾åŠŸèƒ½æµ‹è¯•**
- åŸºç¡€æ ‡ç­¾å‘½ä»¤æµ‹è¯•
- æŸ¥è¯¢æ—¥å¿—æ§åˆ¶ (`--disable_query_log`, `--enable_query_log`)
- ç»“æœæ—¥å¿—æ§åˆ¶ (`--disable_result_log`, `--enable_result_log`)
- ç»“æœæ’åº (`--sorted_result`)
- æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢ (`--replace_regex`)
- é”™è¯¯å¤„ç† (`--error`)

### 2. `tags_basic_features.test`
**åŸºç¡€åŠŸèƒ½æ‰©å±•æµ‹è¯•**
- æ—¥å¿—æ§åˆ¶ç»„åˆæµ‹è¯•
- å¤šä¸ª replace_regex æ¨¡å¼ç»„åˆ
- å¤æ‚æ•°æ®çš„ sorted_result æµ‹è¯•
- é”™è¯¯å¤„ç†çš„è¾¹ç•Œæƒ…å†µ
- æ ‡ç­¾çŠ¶æ€ç®¡ç†

### 3. `tags_advanced_scenarios.test`
**é«˜çº§åœºæ™¯æµ‹è¯•**
- æ ‡ç­¾çŠ¶æ€åˆ‡æ¢æµ‹è¯•
- å¤æ‚æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼
- NULL å€¼å¤„ç†
- åµŒå¥—é”™è¯¯å¤„ç†
- æ ‡ç­¾ä¸å˜é‡ç³»ç»Ÿç»“åˆ

### 4. `tags_concurrent_scenarios.test`
**å¹¶å‘ç¯å¢ƒæµ‹è¯•**
- å¹¶å‘æ¨¡å¼ä¸‹çš„æ ‡ç­¾è¡Œä¸º
- å¤šçº¿ç¨‹æ ‡ç­¾çŠ¶æ€éš”ç¦»
- å¹¶å‘ replace_regex å¤„ç†
- å¹¶å‘é”™è¯¯å¤„ç†
- çŠ¶æ€æ¢å¤æµ‹è¯•

### 5. `tags_edge_cases.test`
**è¾¹ç•Œæ¡ä»¶æµ‹è¯•**
- ç©ºç»“æœé›†å¤„ç†
- å•è¡Œç»“æœå¤„ç†
- æ— åŒ¹é…çš„ replace_regex
- ç‰¹æ®Šå­—ç¬¦å¤„ç†
- Unicode å­—ç¬¦æ”¯æŒ
- æé•¿æ–‡æœ¬å¤„ç†

### 6. `tags_performance_test.test`
**æ€§èƒ½æµ‹è¯•**
- å¤§æ•°æ®é‡çš„ sorted_result æ€§èƒ½
- å¤šä¸ª replace_regex çš„æ€§èƒ½
- é¢‘ç¹çŠ¶æ€åˆ‡æ¢çš„æ€§èƒ½
- å¤æ‚æŸ¥è¯¢çš„æ—¥å¿—æ§åˆ¶æ€§èƒ½
- å¤§ç»“æœé›†å¤„ç†æ€§èƒ½

### 7. `tags_integration_test.test`
**é›†æˆæµ‹è¯•**
- æ ‡ç­¾ä¸å˜é‡ç³»ç»Ÿé›†æˆ
- æ ‡ç­¾ä¸æ§åˆ¶æµé›†æˆ
- æ ‡ç­¾ä¸è¿æ¥ç®¡ç†é›†æˆ
- æ ‡ç­¾ä¸äº‹åŠ¡é›†æˆ
- æ ‡ç­¾ä¸å­˜å‚¨è¿‡ç¨‹é›†æˆ
- æ ‡ç­¾ä¸è§†å›¾é›†æˆ

## ğŸ·ï¸ æ”¯æŒçš„æ ‡ç­¾å‘½ä»¤

### æ—¥å¿—æ§åˆ¶æ ‡ç­¾
- `--disable_query_log` - ç¦ç”¨æŸ¥è¯¢æ—¥å¿—
- `--enable_query_log` - å¯ç”¨æŸ¥è¯¢æ—¥å¿—
- `--disable_result_log` - ç¦ç”¨ç»“æœæ—¥å¿—
- `--enable_result_log` - å¯ç”¨ç»“æœæ—¥å¿—

### ç»“æœå¤„ç†æ ‡ç­¾
- `--sorted_result` - å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åº
- `--replace_regex /pattern/replacement/` - ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢ç»“æœä¸­çš„æ¨¡å¼

### é”™è¯¯å¤„ç†æ ‡ç­¾
- `--error <code>` - æœŸæœ›ä¸‹ä¸€ä¸ªæŸ¥è¯¢è¿”å›ç‰¹å®šé”™è¯¯ç 

### è¾“å‡ºæ§åˆ¶æ ‡ç­¾
- `--echo <message>` - è¾“å‡ºæ¶ˆæ¯åˆ°æµ‹è¯•ç»“æœ

## ğŸš€ è¿è¡Œæµ‹è¯•

### å•ç‹¬è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
cargo run -- --extension dev tests/integration/advanced/tags_basic_features.test

# è®°å½•æµ‹è¯•åŸºçº¿
cargo run -- --extension dev --record tests/integration/advanced/tags_basic_features.test
```

### æ‰¹é‡è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æ ‡ç­¾åŠŸèƒ½æµ‹è¯•
./run_tag_tests.sh

# è¿è¡Œç‰¹å®šç±»å‹çš„æµ‹è¯•
cargo run -- --extension dev tests/integration/advanced/tags_*.test
```

### å¹¶å‘è¿è¡Œæµ‹è¯•
```bash
# å¹¶å‘è¿è¡Œå¤šä¸ªæµ‹è¯•æ–‡ä»¶
cargo run -- --extension dev --parallel 4 tests/integration/advanced/tags_*.test
```

## ğŸ“ˆ æµ‹è¯•è¦†ç›–ç‡

### åŠŸèƒ½è¦†ç›–
- âœ… æ‰€æœ‰å·²å®ç°çš„æ ‡ç­¾å‘½ä»¤
- âœ… æ ‡ç­¾çŠ¶æ€ç®¡ç†
- âœ… æ ‡ç­¾ç»„åˆä½¿ç”¨
- âœ… é”™è¯¯å¤„ç†
- âœ… è¾¹ç•Œæ¡ä»¶
- âœ… æ€§èƒ½æµ‹è¯•
- âœ… é›†æˆæµ‹è¯•

### åœºæ™¯è¦†ç›–
- âœ… åŸºç¡€åŠŸèƒ½æµ‹è¯•
- âœ… é«˜çº§åœºæ™¯æµ‹è¯•
- âœ… å¹¶å‘ç¯å¢ƒæµ‹è¯•
- âœ… è¾¹ç•Œæ¡ä»¶æµ‹è¯•
- âœ… æ€§èƒ½å‹åŠ›æµ‹è¯•
- âœ… ç³»ç»Ÿé›†æˆæµ‹è¯•

## ğŸ› ï¸ æµ‹è¯•ç¯å¢ƒé…ç½®

### æ•°æ®åº“é…ç½®
```bash
# é»˜è®¤é…ç½®
HOST=127.0.0.1
PORT=3306
USER=root
PASSWORD=123456
```

### ç¯å¢ƒå˜é‡
```bash
# å¯ç”¨è°ƒè¯•æ—¥å¿—
export RUST_LOG=debug

# ä½¿ç”¨å¼€å‘ç¯å¢ƒæ‰©å±•
EXTENSION=dev
```

## ğŸ“ æ·»åŠ æ–°æµ‹è¯•

### æµ‹è¯•æ–‡ä»¶å‘½åè§„èŒƒ
- `tags_<category>_<type>.test` - æ ‡ç­¾åŠŸèƒ½æµ‹è¯•
- `tags_<specific_feature>.test` - ç‰¹å®šåŠŸèƒ½æµ‹è¯•

### æµ‹è¯•å†…å®¹è§„èŒƒ
1. **æµ‹è¯•ç›®æ ‡æ˜ç¡®** - æ¯ä¸ªæµ‹è¯•æ–‡ä»¶æœ‰æ˜ç¡®çš„æµ‹è¯•ç›®æ ‡
2. **åœºæ™¯å®Œæ•´** - è¦†ç›–æ­£å¸¸æƒ…å†µå’Œå¼‚å¸¸æƒ…å†µ
3. **æ•°æ®æ¸…ç†** - æµ‹è¯•åæ¸…ç†åˆ›å»ºçš„æ•°æ®
4. **ç»“æœå¯é‡å¤** - æµ‹è¯•ç»“æœåº”è¯¥æ˜¯å¯é‡å¤çš„
5. **æ³¨é‡Šæ¸…æ™°** - ä½¿ç”¨ `--echo` æä¾›æ¸…æ™°çš„æµ‹è¯•è¯´æ˜

### ç¤ºä¾‹æµ‹è¯•ç»“æ„
```sql
# æµ‹è¯•æè¿°
--echo Testing specific tag functionality

# å‡†å¤‡æµ‹è¯•æ•°æ®
CREATE TABLE test_table (...);
INSERT INTO test_table VALUES (...);

# æ‰§è¡Œæµ‹è¯•
--<tag_command>
SELECT * FROM test_table;

# æ¸…ç†æ•°æ®
DROP TABLE test_table;

--echo Test completed!
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æµ‹è¯•å¤±è´¥** - æ£€æŸ¥æ•°æ®åº“è¿æ¥é…ç½®
2. **ç»“æœä¸åŒ¹é…** - é‡æ–°ç”Ÿæˆæµ‹è¯•åŸºçº¿
3. **æ€§èƒ½é—®é¢˜** - è°ƒæ•´æµ‹è¯•æ•°æ®é‡
4. **å¹¶å‘é—®é¢˜** - æ£€æŸ¥æ•°æ®åº“è¿æ¥æ± é…ç½®

### è°ƒè¯•æŠ€å·§
```bash
# å¯ç”¨è¯¦ç»†æ—¥å¿—
RUST_LOG=debug cargo run -- --extension dev test_file.test

# æŸ¥çœ‹å…·ä½“é”™è¯¯
cargo run -- --extension dev test_file.test 2>&1 | grep -A 5 -B 5 "ERROR"
```

## ğŸ“š å‚è€ƒèµ„æ–™

- [CLAUDE.md](../../../CLAUDE.md) - é¡¹ç›®å¼€å‘æŒ‡å—
- [MySQL Test Format](https://dev.mysql.com/doc/dev/mysql-server/latest/PAGE_MYSQL_TEST_RUN.html) - MySQL æµ‹è¯•æ ¼å¼å‚è€ƒ
- [Rust Regex](https://docs.rs/regex/latest/regex/) - Rust æ­£åˆ™è¡¨è¾¾å¼æ–‡æ¡£